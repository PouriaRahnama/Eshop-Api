2023-09-25 22:08:28.158 +03:30 [ERR] shop.Web.Controllers.Auth.AuthController.Login (shop.Web) Executing
2023-09-25 22:08:36.844 +03:30 [ERR] shop.Web.Controllers.Auth.AuthController.Login (shop.Web) Executed
2023-09-25 22:23:53.784 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.AddRolePermission (shop.Web) Executing
2023-09-25 22:23:53.943 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.AddRolePermission (shop.Web) Executed
2023-09-25 22:23:59.515 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.AddRolePermission (shop.Web) Executing
2023-09-25 22:23:59.521 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.AddRolePermission (shop.Web) Executed
2023-09-25 22:24:02.697 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.AddRolePermission (shop.Web) Executing
2023-09-25 22:24:02.702 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.AddRolePermission (shop.Web) Executed
2023-09-25 22:24:06.482 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.AddRolePermission (shop.Web) Executing
2023-09-25 22:24:06.485 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.AddRolePermission (shop.Web) Executed
2023-09-25 22:24:10.229 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.AddRolePermission (shop.Web) Executing
2023-09-25 22:24:10.233 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.AddRolePermission (shop.Web) Executed
2023-09-25 22:24:14.927 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.AddRolePermission (shop.Web) Executing
2023-09-25 22:24:14.931 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.AddRolePermission (shop.Web) Executed
2023-09-25 22:24:18.448 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.AddRolePermission (shop.Web) Executing
2023-09-25 22:24:18.452 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.AddRolePermission (shop.Web) Executed
2023-09-25 22:24:22.442 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.AddRolePermission (shop.Web) Executing
2023-09-25 22:24:22.445 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.AddRolePermission (shop.Web) Executed
2023-09-25 22:24:26.347 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.AddRolePermission (shop.Web) Executing
2023-09-25 22:24:26.351 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.AddRolePermission (shop.Web) Executed
2023-09-25 22:24:29.383 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.AddRolePermission (shop.Web) Executing
2023-09-25 22:24:29.388 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.AddRolePermission (shop.Web) Executed
2023-09-25 22:25:27.130 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.AddRolePermission (shop.Web) Executing
2023-09-25 22:25:27.138 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.AddRolePermission (shop.Web) Executed
2023-09-25 22:25:30.296 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.AddRolePermission (shop.Web) Executing
2023-09-25 22:25:30.299 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.AddRolePermission (shop.Web) Executed
2023-09-25 22:25:33.709 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.AddRolePermission (shop.Web) Executing
2023-09-25 22:25:33.718 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.AddRolePermission (shop.Web) Executed
2023-09-25 22:25:36.819 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.AddRolePermission (shop.Web) Executing
2023-09-25 22:25:36.823 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.AddRolePermission (shop.Web) Executed
2023-09-25 22:25:53.161 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.AddRolePermission (shop.Web) Executing
2023-09-25 22:25:53.181 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.AddRolePermission (shop.Web) Executed
2023-09-25 22:28:31.569 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.RemoveRolePermission (shop.Web) Executing
2023-09-25 22:28:33.163 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.RemoveRolePermission (shop.Web) Executed
2023-09-25 22:29:02.962 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.RemoveRolePermission (shop.Web) Executing
2023-09-25 22:29:26.363 +03:30 [ERR] shop.Web.Controllers.Role.RoleController.RemoveRolePermission (shop.Web) Executed
2023-09-25 22:30:15.552 +03:30 [ERR] shop.Web.Controllers.User.UserController.RemoveUserRole (shop.Web) Executing
2023-09-25 22:31:03.193 +03:30 [ERR] shop.Web.Controllers.User.UserController.RemoveUserRole (shop.Web) Executed
2023-09-25 22:31:03.236 +03:30 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The instance of entity type 'UserRole' cannot be tracked because another instance with the same key value for {'UserId', 'RoleId'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.NullableKeyIdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintAction(EntityEntryGraphNode`1 node)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraph[TState](EntityEntryGraphNode`1 node, Func`2 handleNode)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraph(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.SetEntityState(InternalEntityEntry entry, EntityState entityState)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Update(TEntity entity)
   at shop.Data.Repository.EFRepository`1.Update(TEntity entity) in C:\Users\acer\Desktop\Eshop\shop.Data\Repository\EFRepository.cs:line 74
   at shop.Service.Command.UserService.RemoveUserRole(RemoveUserRoleDto RemoveUserRoleDto) in C:\Users\acer\Desktop\Eshop\shop.Service\Command\User\UserService.cs:line 120
   at shop.Web.Controllers.User.UserController.RemoveUserRole(RemoveUserRoleDto command) in C:\Users\acer\Desktop\Eshop\shop.Web\Controllers\User\UserController.cs:line 105
   at lambda_method428(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|8_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2023-09-25 22:32:03.799 +03:30 [ERR] shop.Web.Controllers.User.UserController.RemoveUserRole (shop.Web) Executing
2023-09-25 22:32:30.092 +03:30 [ERR] shop.Web.Controllers.User.UserController.RemoveUserRole (shop.Web) Executed
2023-09-25 22:32:30.103 +03:30 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The instance of entity type 'UserRole' cannot be tracked because another instance with the same key value for {'UserId', 'RoleId'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.NullableKeyIdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintAction(EntityEntryGraphNode`1 node)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraph[TState](EntityEntryGraphNode`1 node, Func`2 handleNode)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraph(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.SetEntityState(InternalEntityEntry entry, EntityState entityState)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Update(TEntity entity)
   at shop.Data.Repository.EFRepository`1.Update(TEntity entity) in C:\Users\acer\Desktop\Eshop\shop.Data\Repository\EFRepository.cs:line 74
   at shop.Service.Command.UserService.RemoveUserRole(RemoveUserRoleDto RemoveUserRoleDto)
   at shop.Web.Controllers.User.UserController.RemoveUserRole(RemoveUserRoleDto command) in C:\Users\acer\Desktop\Eshop\shop.Web\Controllers\User\UserController.cs:line 105
   at lambda_method428(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|8_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2023-09-25 22:36:26.481 +03:30 [ERR] shop.Web.Controllers.User.UserController.RemoveUserRole (shop.Web) Executing
2023-09-25 22:37:39.236 +03:30 [ERR] shop.Web.Controllers.User.UserController.RemoveUserRole (shop.Web) Executed
2023-09-25 22:37:39.266 +03:30 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The instance of entity type 'UserRole' cannot be tracked because another instance with the same key value for {'UserId', 'RoleId'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.NullableKeyIdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintAction(EntityEntryGraphNode`1 node)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraph[TState](EntityEntryGraphNode`1 node, Func`2 handleNode)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraph(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.SetEntityState(InternalEntityEntry entry, EntityState entityState)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Update(TEntity entity)
   at shop.Data.Repository.EFRepository`1.Update(TEntity entity) in C:\Users\acer\Desktop\Eshop\shop.Data\Repository\EFRepository.cs:line 74
   at shop.Service.Command.UserService.RemoveUserRole(RemoveUserRoleDto RemoveUserRoleDto) in C:\Users\acer\Desktop\Eshop\shop.Service\Command\User\UserService.cs:line 121
   at shop.Web.Controllers.User.UserController.RemoveUserRole(RemoveUserRoleDto command) in C:\Users\acer\Desktop\Eshop\shop.Web\Controllers\User\UserController.cs:line 105
   at lambda_method308(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|8_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2023-09-25 22:50:28.156 +03:30 [ERR] shop.Web.Controllers.User.UserController.RemoveUserRole (shop.Web) Executing
2023-09-25 22:50:28.404 +03:30 [ERR] shop.Web.Controllers.User.UserController.RemoveUserRole (shop.Web) Executed
2023-09-25 22:50:28.407 +03:30 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The instance of entity type 'UserRole' cannot be tracked because another instance with the same key value for {'UserId', 'RoleId'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.NullableKeyIdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintAction(EntityEntryGraphNode`1 node)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraph[TState](EntityEntryGraphNode`1 node, Func`2 handleNode)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraph(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.SetEntityState(InternalEntityEntry entry, EntityState entityState)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Update(TEntity entity)
   at shop.Data.Repository.EFRepository`1.Update(TEntity entity) in C:\Users\acer\Desktop\Eshop\shop.Data\Repository\EFRepository.cs:line 74
   at shop.Service.Command.UserService.RemoveUserRole(RemoveUserRoleDto RemoveUserRoleDto) in C:\Users\acer\Desktop\Eshop\shop.Service\Command\User\UserService.cs:line 121
   at shop.Web.Controllers.User.UserController.RemoveUserRole(RemoveUserRoleDto command) in C:\Users\acer\Desktop\Eshop\shop.Web\Controllers\User\UserController.cs:line 105
   at lambda_method308(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|8_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2023-09-25 22:51:31.537 +03:30 [ERR] shop.Web.Controllers.User.UserController.RemoveUserRole (shop.Web) Executing
2023-09-25 22:52:30.940 +03:30 [ERR] shop.Web.Controllers.User.UserController.RemoveUserRole (shop.Web) Executed
2023-09-25 22:52:30.952 +03:30 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The instance of entity type 'UserRole' cannot be tracked because another instance with the same key value for {'UserId', 'RoleId'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.NullableKeyIdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintAction(EntityEntryGraphNode`1 node)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraph[TState](EntityEntryGraphNode`1 node, Func`2 handleNode)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraph(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.SetEntityState(InternalEntityEntry entry, EntityState entityState)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Update(TEntity entity)
   at shop.Data.Repository.EFRepository`1.Update(TEntity entity) in C:\Users\acer\Desktop\Eshop\shop.Data\Repository\EFRepository.cs:line 78
   at shop.Service.Command.UserService.RemoveUserRole(RemoveUserRoleDto RemoveUserRoleDto) in C:\Users\acer\Desktop\Eshop\shop.Service\Command\User\UserService.cs:line 121
   at shop.Web.Controllers.User.UserController.RemoveUserRole(RemoveUserRoleDto command) in C:\Users\acer\Desktop\Eshop\shop.Web\Controllers\User\UserController.cs:line 105
   at lambda_method308(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|8_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2023-09-25 22:52:35.142 +03:30 [ERR] shop.Web.Controllers.User.UserController.RemoveUserRole (shop.Web) Executing
2023-09-25 22:52:37.812 +03:30 [ERR] shop.Web.Controllers.User.UserController.RemoveUserRole (shop.Web) Executed
2023-09-25 22:52:37.816 +03:30 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The instance of entity type 'UserRole' cannot be tracked because another instance with the same key value for {'UserId', 'RoleId'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.NullableKeyIdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintAction(EntityEntryGraphNode`1 node)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraph[TState](EntityEntryGraphNode`1 node, Func`2 handleNode)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraph(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.SetEntityState(InternalEntityEntry entry, EntityState entityState)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Update(TEntity entity)
   at shop.Data.Repository.EFRepository`1.Update(TEntity entity) in C:\Users\acer\Desktop\Eshop\shop.Data\Repository\EFRepository.cs:line 78
   at shop.Service.Command.UserService.RemoveUserRole(RemoveUserRoleDto RemoveUserRoleDto) in C:\Users\acer\Desktop\Eshop\shop.Service\Command\User\UserService.cs:line 121
   at shop.Web.Controllers.User.UserController.RemoveUserRole(RemoveUserRoleDto command) in C:\Users\acer\Desktop\Eshop\shop.Web\Controllers\User\UserController.cs:line 105
   at lambda_method308(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|8_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2023-09-25 22:59:50.245 +03:30 [ERR] shop.Web.Controllers.User.UserController.RemoveUserRole (shop.Web) Executing
2023-09-25 23:00:23.503 +03:30 [ERR] shop.Web.Controllers.User.UserController.RemoveUserRole (shop.Web) Executed
2023-09-25 23:04:53.641 +03:30 [ERR] shop.Web.Controllers.Auth.AuthController.Login (shop.Web) Executing
2023-09-25 23:07:47.077 +03:30 [ERR] shop.Web.Controllers.Auth.AuthController.Login (shop.Web) Executed
2023-09-25 23:07:51.313 +03:30 [ERR] shop.Web.Controllers.Auth.AuthController.Login (shop.Web) Executing
2023-09-25 23:07:51.416 +03:30 [ERR] shop.Web.Controllers.Auth.AuthController.Login (shop.Web) Executed
2023-09-25 23:08:17.917 +03:30 [ERR] shop.Web.Controllers.Auth.AuthController.Login (shop.Web) Executing
2023-09-25 23:08:18.033 +03:30 [ERR] shop.Web.Controllers.Auth.AuthController.Login (shop.Web) Executed
2023-09-25 23:08:56.869 +03:30 [ERR] shop.Web.Controllers.Auth.AuthController.Login (shop.Web) Executing
2023-09-25 23:10:28.227 +03:30 [ERR] shop.Web.Controllers.Auth.AuthController.Login (shop.Web) Executed
2023-09-25 23:11:36.670 +03:30 [ERR] shop.Web.Controllers.Auth.AuthController.Login (shop.Web) Executing
2023-09-25 23:12:29.867 +03:30 [ERR] shop.Web.Controllers.Auth.AuthController.Login (shop.Web) Executed
2023-09-25 23:12:33.399 +03:30 [ERR] shop.Web.Controllers.Auth.AuthController.Login (shop.Web) Executing
2023-09-25 23:13:05.825 +03:30 [ERR] shop.Web.Controllers.Auth.AuthController.Login (shop.Web) Executed
2023-09-25 23:57:18.731 +03:30 [ERR] shop.Web.Controllers.Category.CategoryController.RemoveCategory (shop.Web) Executing
2023-09-25 23:57:57.709 +03:30 [ERR] shop.Web.Controllers.Category.CategoryController.RemoveCategory (shop.Web) Executed
2023-09-25 23:58:57.974 +03:30 [ERR] shop.Web.Controllers.Order.OrderController.RemoveOrderItem (shop.Web) Executing
2023-09-25 23:59:08.492 +03:30 [ERR] shop.Web.Controllers.Order.OrderController.RemoveOrderItem (shop.Web) Executed
